{"ast":null,"code":"var _jsxFileName = \"/home/abdisalam/Documents/Incident/ClientApp/src/views/snapshot/Snapshot.jsx\";\nimport React, { Component } from \"react\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Card, Row, Col } from \"react-bootstrap\";\nimport { SelectField, SubmitBtn, TextField, UploadFileField, TextAreaField } from \"../../components/Form\";\nimport Config from \"../../config/config.json\";\nimport Services from \"../../services/HttpServices\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Snapshot extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      snapshot: {\n        id: 0,\n        customerId: \"\",\n        roomId: \"\",\n        amount: \"\",\n        startDate: \"\"\n      },\n      file: \"\",\n      shifts: [{\n        value: \"7:00 - 11:00 am\",\n        label: \"7:00 - 11:00 am\"\n      }, {\n        value: \"12:00 - 4:00 pm\",\n        label: \"12:00 - 4:00 pm\"\n      }, {\n        value: \"5:00 - 7:00 pm\",\n        label: \"5:00 - 7:00 pm\"\n      }, {\n        value: \"7:00 - 11:00 pm\",\n        label: \"7:00 - 11:00 pm\"\n      }, {\n        value: \"12:00 - 4:00 am\",\n        label: \"12:00 - 4:00 am\"\n      }, {\n        value: \"5:00 - 7:00 am\",\n        label: \"5:00 - 7:00 am\"\n      }],\n      categories: [{\n        label: \"Safety\",\n        value: \"safety\"\n      }, {\n        label: \"Environment\",\n        value: \"environment\"\n      }, {\n        label: \"Security\",\n        value: \"security\"\n      }],\n      incidentTypes: [{\n        label: \"Not wearing ppe\",\n        value: \"not wearing ppe\"\n      }, {\n        label: \"Driving high speed\",\n        value: \"driving high speed\"\n      }, {\n        label: \"Working/Standing under suspension\",\n        value: \"working/Standing under suspension\"\n      }],\n      locations: [{\n        label: \"Main Yard\",\n        value: \"main yard\"\n      }, {\n        label: \"Queyside\",\n        value: \"queyside\"\n      }, {\n        label: \"Gate1\",\n        value: \"gate1\"\n      }, {\n        label: \"Gate2\",\n        value: \"gate2\"\n      }, {\n        label: \"Gate3\",\n        value: \"gate3\"\n      }, {\n        label: \"Gate4\",\n        value: \"gate4\"\n      }, {\n        label: \"Gate-pregate\",\n        value: \"gate-pregate\"\n      }, {\n        label: \"Gate-In\",\n        value: \"gate-in\"\n      }, {\n        label: \"Gate-Out\",\n        value: \"gate-out\"\n      }],\n      peoples: [{\n        label: \"Third part labor\",\n        value: \"third part labor\"\n      }, {\n        label: \"Employee\",\n        value: \"employee\"\n      }, {\n        label: \"Employee with third part labor\",\n        value: \"employee with third part labor\"\n      }],\n      equibmenties: [{\n        label: \"Personal car\",\n        value: \"personal car\"\n      }, {\n        label: \"Terminal pick up\",\n        value: \"terminal pick up\"\n      }, {\n        label: \"MHC\",\n        value: \"mhc\"\n      }, {\n        label: \"QC\",\n        value: \"qc\"\n      }, {\n        label: \"RS\",\n        value: \"rs\"\n      }, {\n        label: \"RTG\",\n        value: \"rtg\"\n      }, {\n        label: \"ITV\",\n        value: \"itv\"\n      }, {\n        label: \"ECH\",\n        value: \"ech\"\n      }, {\n        label: \"MC\",\n        value: \"mc\"\n      }, {\n        label: \"ML\",\n        value: \"ml\"\n      }, {\n        label: \"FL\",\n        value: \"fl\"\n      }],\n      responsiblies: [{\n        label: \"Operarion\",\n        value: \"operations\"\n      }, {\n        label: \"Technical\",\n        value: \"technical\"\n      }, {\n        label: \"Safety\",\n        value: \"safety\"\n      }, {\n        label: \"IT\",\n        value: \"it\"\n      }, {\n        label: \"Finance\",\n        value: \"finance\"\n      }, {\n        label: \"HR\",\n        value: \"hr\"\n      }, {\n        label: \"Security\",\n        value: \"security\"\n      }, {\n        label: \"Clinical\",\n        value: \"clinical\"\n      }, {\n        label: \"Others\",\n        value: \"others\"\n      }],\n      status: [{\n        label: \"Open\",\n        value: \"open\"\n      }, {\n        label: \"Close\",\n        value: \"close\"\n      }]\n    };\n    this.schema = Yup.object({\n      id: Yup.number().label(\"Id\"),\n      customerId: Yup.number().required().label(\"Customer\"),\n      roomId: Yup.number().required().label(\"Room\"),\n      amount: Yup.number().required().min(0).max(10000).label(\"Amount\"),\n      startDate: Yup.date().required().label(\"Start Date\")\n    });\n\n    this.handleFile = file => {\n      this.setState({\n        file\n      });\n    };\n\n    this.handleStringToArray = (str = \"\") => {\n      const array = str.split(\",\");\n      const buffer = [];\n\n      for (let index = 0; index < array.length; index++) {\n        buffer[index] = array[index];\n      }\n\n      const data = new Uint8Array(buffer);\n      return data;\n    };\n\n    this.handleSubmit = () => {\n      const {\n        snapshot,\n        file\n      } = this.state;\n      const auth = {\n        Authorization: `bearer ${localStorage[\"token\"]}`\n      };\n      const data = { ...snapshot,\n        document: file\n      };\n      this.setState({\n        snapshot: {\n          id: 0,\n          customerId: \"\",\n          roomId: \"\",\n          amount: \"\",\n          startDate: snapshot.startDate\n        },\n        file: \"\"\n      });\n      Services.post(Config.apiUrl + \"/snapshots\", data, {\n        headers: auth\n      }).then(() => {\n        toast.success(\"Successful Registred.\");\n      }).catch(error => {\n        console.log(error);\n\n        if (error.response && error.response.data) {\n          toast.error(error.response.data);\n        } else {\n          toast.error(\"Something went wrong\");\n        }\n      });\n    };\n  }\n\n  render() {\n    const {\n      snapshot,\n      file,\n      shifts,\n      categories,\n      incidentTypes,\n      locations,\n      peoples,\n      equibmenties,\n      responsiblies,\n      status\n    } = this.state;\n    const fileImage = URL.createObjectURL(new Blob([this.handleStringToArray(file)], {\n      type: \"image/png\"\n    }));\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          children: /*#__PURE__*/_jsxDEV(Card.Title, {\n            children: snapshot.id === 0 ? \"New Snapshot\" : \"Update Snapshot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: snapshot,\n          enableReinitialize: true,\n          validationSchema: this.schema,\n          onSubmit: (snapshot, {\n            resetForm\n          }) => {\n            resetForm();\n            this.setState({\n              snapshot\n            });\n            this.handleSubmit(snapshot);\n          },\n          children: () => /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"category\",\n                    label: \"Category\",\n                    options: categories,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"incidentTyp\",\n                    label: \"Incident Type\",\n                    options: incidentTypes,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"location\",\n                    label: \"Location\",\n                    options: locations,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"shift\",\n                    label: \"shift\",\n                    options: shifts,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"peopleInvoved\",\n                    label: \"People Involved\",\n                    options: peoples,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"equibment\",\n                    label: \"Equibment\",\n                    options: equibmenties,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"responsible\",\n                    label: \"Responsible\",\n                    options: responsiblies,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"status\",\n                    label: \"Status\",\n                    options: status,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    name: \"action\",\n                    label: \"Action on site\",\n                    required: true,\n                    type: \"number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(UploadFileField, {\n                    name: \"image\",\n                    file: \"file\",\n                    label: \"Document\",\n                    type: \"file\",\n                    setFile: this.handleFile\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 23\n                  }, this), file && /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: fileImage,\n                    download: true,\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      width: \"400\",\n                      height: \"400\",\n                      src: fileImage,\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(TextAreaField, {\n                    name: \"description\",\n                    label: \"Description\",\n                    rows: 5\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsxDEV(SubmitBtn, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default Snapshot;","map":{"version":3,"sources":["/home/abdisalam/Documents/Incident/ClientApp/src/views/snapshot/Snapshot.jsx"],"names":["React","Component","Formik","Yup","Card","Row","Col","SelectField","SubmitBtn","TextField","UploadFileField","TextAreaField","Config","Services","toast","Snapshot","state","snapshot","id","customerId","roomId","amount","startDate","file","shifts","value","label","categories","incidentTypes","locations","peoples","equibmenties","responsiblies","status","schema","object","number","required","min","max","date","handleFile","setState","handleStringToArray","str","array","split","buffer","index","length","data","Uint8Array","handleSubmit","auth","Authorization","localStorage","document","post","apiUrl","headers","then","success","catch","error","console","log","response","render","fileImage","URL","createObjectURL","Blob","type","resetForm"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AAEA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,GAApB,QAA+B,iBAA/B;AACA,SACEC,WADF,EAEEC,SAFF,EAGEC,SAHF,EAIEC,eAJF,EAKEC,aALF,QAMO,uBANP;AAOA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,SAASC,KAAT,QAAsB,gBAAtB;;;;AAEA,MAAMC,QAAN,SAAuBd,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC/Be,KAD+B,GACvB;AACNC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,EAAE,EAAE,CADI;AAERC,QAAAA,UAAU,EAAE,EAFJ;AAGRC,QAAAA,MAAM,EAAE,EAHA;AAIRC,QAAAA,MAAM,EAAE,EAJA;AAKRC,QAAAA,SAAS,EAAE;AALH,OADJ;AAQNC,MAAAA,IAAI,EAAE,EARA;AASNC,MAAAA,MAAM,EAAE,CACN;AAAEC,QAAAA,KAAK,EAAE,iBAAT;AAA4BC,QAAAA,KAAK,EAAE;AAAnC,OADM,EAEN;AAAED,QAAAA,KAAK,EAAE,iBAAT;AAA4BC,QAAAA,KAAK,EAAE;AAAnC,OAFM,EAGN;AAAED,QAAAA,KAAK,EAAE,gBAAT;AAA2BC,QAAAA,KAAK,EAAE;AAAlC,OAHM,EAIN;AAAED,QAAAA,KAAK,EAAE,iBAAT;AAA4BC,QAAAA,KAAK,EAAE;AAAnC,OAJM,EAKN;AAAED,QAAAA,KAAK,EAAE,iBAAT;AAA4BC,QAAAA,KAAK,EAAE;AAAnC,OALM,EAMN;AAAED,QAAAA,KAAK,EAAE,gBAAT;AAA2BC,QAAAA,KAAK,EAAE;AAAlC,OANM,CATF;AAiBNC,MAAAA,UAAU,EAAE,CACV;AAAED,QAAAA,KAAK,EAAE,QAAT;AAAmBD,QAAAA,KAAK,EAAE;AAA1B,OADU,EAEV;AAAEC,QAAAA,KAAK,EAAE,aAAT;AAAwBD,QAAAA,KAAK,EAAE;AAA/B,OAFU,EAGV;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBD,QAAAA,KAAK,EAAE;AAA5B,OAHU,CAjBN;AAsBNG,MAAAA,aAAa,EAAE,CACb;AAAEF,QAAAA,KAAK,EAAE,iBAAT;AAA4BD,QAAAA,KAAK,EAAE;AAAnC,OADa,EAEb;AAAEC,QAAAA,KAAK,EAAE,oBAAT;AAA+BD,QAAAA,KAAK,EAAE;AAAtC,OAFa,EAGb;AACEC,QAAAA,KAAK,EAAE,mCADT;AAEED,QAAAA,KAAK,EAAE;AAFT,OAHa,CAtBT;AA8BNI,MAAAA,SAAS,EAAE,CACT;AAAEH,QAAAA,KAAK,EAAE,WAAT;AAAsBD,QAAAA,KAAK,EAAE;AAA7B,OADS,EAET;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBD,QAAAA,KAAK,EAAE;AAA5B,OAFS,EAGT;AAAEC,QAAAA,KAAK,EAAE,OAAT;AAAkBD,QAAAA,KAAK,EAAE;AAAzB,OAHS,EAIT;AAAEC,QAAAA,KAAK,EAAE,OAAT;AAAkBD,QAAAA,KAAK,EAAE;AAAzB,OAJS,EAKT;AAAEC,QAAAA,KAAK,EAAE,OAAT;AAAkBD,QAAAA,KAAK,EAAE;AAAzB,OALS,EAMT;AAAEC,QAAAA,KAAK,EAAE,OAAT;AAAkBD,QAAAA,KAAK,EAAE;AAAzB,OANS,EAOT;AAAEC,QAAAA,KAAK,EAAE,cAAT;AAAyBD,QAAAA,KAAK,EAAE;AAAhC,OAPS,EAQT;AAAEC,QAAAA,KAAK,EAAE,SAAT;AAAoBD,QAAAA,KAAK,EAAE;AAA3B,OARS,EAST;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBD,QAAAA,KAAK,EAAE;AAA5B,OATS,CA9BL;AAyCNK,MAAAA,OAAO,EAAE,CACP;AAAEJ,QAAAA,KAAK,EAAE,kBAAT;AAA6BD,QAAAA,KAAK,EAAE;AAApC,OADO,EAEP;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBD,QAAAA,KAAK,EAAE;AAA5B,OAFO,EAGP;AACEC,QAAAA,KAAK,EAAE,gCADT;AAEED,QAAAA,KAAK,EAAE;AAFT,OAHO,CAzCH;AAiDNM,MAAAA,YAAY,EAAE,CACZ;AAAEL,QAAAA,KAAK,EAAE,cAAT;AAAyBD,QAAAA,KAAK,EAAE;AAAhC,OADY,EAEZ;AAAEC,QAAAA,KAAK,EAAE,kBAAT;AAA6BD,QAAAA,KAAK,EAAE;AAApC,OAFY,EAGZ;AAAEC,QAAAA,KAAK,EAAE,KAAT;AAAgBD,QAAAA,KAAK,EAAE;AAAvB,OAHY,EAIZ;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OAJY,EAKZ;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OALY,EAMZ;AAAEC,QAAAA,KAAK,EAAE,KAAT;AAAgBD,QAAAA,KAAK,EAAE;AAAvB,OANY,EAOZ;AAAEC,QAAAA,KAAK,EAAE,KAAT;AAAgBD,QAAAA,KAAK,EAAE;AAAvB,OAPY,EAQZ;AAAEC,QAAAA,KAAK,EAAE,KAAT;AAAgBD,QAAAA,KAAK,EAAE;AAAvB,OARY,EASZ;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OATY,EAUZ;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OAVY,EAWZ;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OAXY,CAjDR;AA8DNO,MAAAA,aAAa,EAAE,CACb;AAAEN,QAAAA,KAAK,EAAE,WAAT;AAAsBD,QAAAA,KAAK,EAAE;AAA7B,OADa,EAEb;AAAEC,QAAAA,KAAK,EAAE,WAAT;AAAsBD,QAAAA,KAAK,EAAE;AAA7B,OAFa,EAGb;AAAEC,QAAAA,KAAK,EAAE,QAAT;AAAmBD,QAAAA,KAAK,EAAE;AAA1B,OAHa,EAIb;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OAJa,EAKb;AAAEC,QAAAA,KAAK,EAAE,SAAT;AAAoBD,QAAAA,KAAK,EAAE;AAA3B,OALa,EAMb;AAAEC,QAAAA,KAAK,EAAE,IAAT;AAAeD,QAAAA,KAAK,EAAE;AAAtB,OANa,EAOb;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBD,QAAAA,KAAK,EAAE;AAA5B,OAPa,EAQb;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBD,QAAAA,KAAK,EAAE;AAA5B,OARa,EASb;AAAEC,QAAAA,KAAK,EAAE,QAAT;AAAmBD,QAAAA,KAAK,EAAE;AAA1B,OATa,CA9DT;AAyENQ,MAAAA,MAAM,EAAE,CACN;AAAEP,QAAAA,KAAK,EAAE,MAAT;AAAiBD,QAAAA,KAAK,EAAE;AAAxB,OADM,EAEN;AAAEC,QAAAA,KAAK,EAAE,OAAT;AAAkBD,QAAAA,KAAK,EAAE;AAAzB,OAFM;AAzEF,KADuB;AAAA,SAgF/BS,MAhF+B,GAgFtB/B,GAAG,CAACgC,MAAJ,CAAW;AAClBjB,MAAAA,EAAE,EAAEf,GAAG,CAACiC,MAAJ,GAAaV,KAAb,CAAmB,IAAnB,CADc;AAElBP,MAAAA,UAAU,EAAEhB,GAAG,CAACiC,MAAJ,GAAaC,QAAb,GAAwBX,KAAxB,CAA8B,UAA9B,CAFM;AAGlBN,MAAAA,MAAM,EAAEjB,GAAG,CAACiC,MAAJ,GAAaC,QAAb,GAAwBX,KAAxB,CAA8B,MAA9B,CAHU;AAIlBL,MAAAA,MAAM,EAAElB,GAAG,CAACiC,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,CAA5B,EAA+BC,GAA/B,CAAmC,KAAnC,EAA0Cb,KAA1C,CAAgD,QAAhD,CAJU;AAKlBJ,MAAAA,SAAS,EAAEnB,GAAG,CAACqC,IAAJ,GAAWH,QAAX,GAAsBX,KAAtB,CAA4B,YAA5B;AALO,KAAX,CAhFsB;;AAAA,SAwP/Be,UAxP+B,GAwPjBlB,IAAD,IAAU;AACrB,WAAKmB,QAAL,CAAc;AAAEnB,QAAAA;AAAF,OAAd;AACD,KA1P8B;;AAAA,SA2P/BoB,mBA3P+B,GA2PT,CAACC,GAAG,GAAG,EAAP,KAAc;AAClC,YAAMC,KAAK,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,CAAd;AACA,YAAMC,MAAM,GAAG,EAAf;;AAEA,WAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,KAAK,CAACI,MAAlC,EAA0CD,KAAK,EAA/C,EAAmD;AACjDD,QAAAA,MAAM,CAACC,KAAD,CAAN,GAAgBH,KAAK,CAACG,KAAD,CAArB;AACD;;AAED,YAAME,IAAI,GAAG,IAAIC,UAAJ,CAAeJ,MAAf,CAAb;AAEA,aAAOG,IAAP;AACD,KAtQ8B;;AAAA,SAuQ/BE,YAvQ+B,GAuQhB,MAAM;AACnB,YAAM;AAAEnC,QAAAA,QAAF;AAAYM,QAAAA;AAAZ,UAAqB,KAAKP,KAAhC;AACA,YAAMqC,IAAI,GAAG;AAAEC,QAAAA,aAAa,EAAG,UAASC,YAAY,CAAC,OAAD,CAAU;AAAjD,OAAb;AACA,YAAML,IAAI,GAAG,EAAE,GAAGjC,QAAL;AAAeuC,QAAAA,QAAQ,EAAEjC;AAAzB,OAAb;AAEA,WAAKmB,QAAL,CAAc;AACZzB,QAAAA,QAAQ,EAAE;AACRC,UAAAA,EAAE,EAAE,CADI;AAERC,UAAAA,UAAU,EAAE,EAFJ;AAGRC,UAAAA,MAAM,EAAE,EAHA;AAIRC,UAAAA,MAAM,EAAE,EAJA;AAKRC,UAAAA,SAAS,EAAEL,QAAQ,CAACK;AALZ,SADE;AAQZC,QAAAA,IAAI,EAAE;AARM,OAAd;AAWAV,MAAAA,QAAQ,CAAC4C,IAAT,CAAc7C,MAAM,CAAC8C,MAAP,GAAgB,YAA9B,EAA4CR,IAA5C,EAAkD;AAAES,QAAAA,OAAO,EAAEN;AAAX,OAAlD,EACGO,IADH,CACQ,MAAM;AACV9C,QAAAA,KAAK,CAAC+C,OAAN,CAAc,uBAAd;AACD,OAHH,EAIGC,KAJH,CAIUC,KAAD,IAAW;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;;AAEA,YAAIA,KAAK,CAACG,QAAN,IAAkBH,KAAK,CAACG,QAAN,CAAehB,IAArC,EAA2C;AACzCpC,UAAAA,KAAK,CAACiD,KAAN,CAAYA,KAAK,CAACG,QAAN,CAAehB,IAA3B;AACD,SAFD,MAEO;AACLpC,UAAAA,KAAK,CAACiD,KAAN,CAAY,sBAAZ;AACD;AACF,OAZH;AAaD,KApS8B;AAAA;;AAwF/BI,EAAAA,MAAM,GAAG;AACP,UAAM;AACJlD,MAAAA,QADI;AAEJM,MAAAA,IAFI;AAGJC,MAAAA,MAHI;AAIJG,MAAAA,UAJI;AAKJC,MAAAA,aALI;AAMJC,MAAAA,SANI;AAOJC,MAAAA,OAPI;AAQJC,MAAAA,YARI;AASJC,MAAAA,aATI;AAUJC,MAAAA;AAVI,QAWF,KAAKjB,KAXT;AAYA,UAAMoD,SAAS,GAAGC,GAAG,CAACC,eAAJ,CAChB,IAAIC,IAAJ,CAAS,CAAC,KAAK5B,mBAAL,CAAyBpB,IAAzB,CAAD,CAAT,EAA2C;AAAEiD,MAAAA,IAAI,EAAE;AAAR,KAA3C,CADgB,CAAlB;AAIA,wBACE;AAAA,6BACE,QAAC,IAAD;AAAA,gCACE,QAAC,IAAD,CAAM,MAAN;AAAA,iCACE,QAAC,IAAD,CAAM,KAAN;AAAA,sBACGvD,QAAQ,CAACC,EAAT,KAAgB,CAAhB,GAAoB,cAApB,GAAqC;AADxC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,MAAD;AACE,UAAA,aAAa,EAAED,QADjB;AAEE,UAAA,kBAAkB,EAAE,IAFtB;AAGE,UAAA,gBAAgB,EAAE,KAAKiB,MAHzB;AAIE,UAAA,QAAQ,EAAE,CAACjB,QAAD,EAAW;AAAEwD,YAAAA;AAAF,WAAX,KAA6B;AACrCA,YAAAA,SAAS;AACT,iBAAK/B,QAAL,CAAc;AAAEzB,cAAAA;AAAF,aAAd;AACA,iBAAKmC,YAAL,CAAkBnC,QAAlB;AACD,WARH;AAAA,oBAUG,mBACC;AAAA,oCACE,QAAC,IAAD,CAAM,IAAN;AAAA,sCACE,QAAC,GAAD;AAAA,wCACE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,UADP;AAEE,oBAAA,KAAK,EAAC,UAFR;AAGE,oBAAA,OAAO,EAAEU,UAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,aADP;AAEE,oBAAA,KAAK,EAAC,eAFR;AAGE,oBAAA,OAAO,EAAEC,aAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAmBE,QAAC,GAAD;AAAA,wCACE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,UADP;AAEE,oBAAA,KAAK,EAAC,UAFR;AAGE,oBAAA,OAAO,EAAEC,SAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,OADP;AAEE,oBAAA,KAAK,EAAC,OAFR;AAGE,oBAAA,OAAO,EAAEL,MAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAnBF,eAqCE,QAAC,GAAD;AAAA,wCACE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,eADP;AAEE,oBAAA,KAAK,EAAC,iBAFR;AAGE,oBAAA,OAAO,EAAEM,OAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,WADP;AAEE,oBAAA,KAAK,EAAC,WAFR;AAGE,oBAAA,OAAO,EAAEC,YAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA,sBArCF,eAuDE,QAAC,GAAD;AAAA,wCACE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,aADP;AAEE,oBAAA,KAAK,EAAC,aAFR;AAGE,oBAAA,OAAO,EAAEC,aAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE,QAAC,GAAD;AAAA,yCACE,QAAC,WAAD;AACE,oBAAA,IAAI,EAAC,QADP;AAEE,oBAAA,KAAK,EAAC,QAFR;AAGE,oBAAA,OAAO,EAAEC,MAHX;AAIE,oBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAvDF,eAyEE,QAAC,GAAD;AAAA,wCACE,QAAC,GAAD;AAAA,yCACE,QAAC,SAAD;AACE,oBAAA,IAAI,EAAC,QADP;AAEE,oBAAA,KAAK,EAAC,gBAFR;AAGE,oBAAA,QAAQ,MAHV;AAIE,oBAAA,IAAI,EAAC;AAJP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eASE,QAAC,GAAD;AAAA,0CACE,QAAC,eAAD;AACE,oBAAA,IAAI,EAAC,OADP;AAEE,oBAAA,IAAI,EAAC,MAFP;AAGE,oBAAA,KAAK,EAAC,UAHR;AAIE,oBAAA,IAAI,EAAC,MAJP;AAKE,oBAAA,OAAO,EAAE,KAAKQ;AALhB;AAAA;AAAA;AAAA;AAAA,0BADF,EAQGlB,IAAI,iBACH;AAAG,oBAAA,IAAI,EAAE6C,SAAT;AAAoB,oBAAA,QAAQ,MAA5B;AAAA,2CACE;AACE,sBAAA,KAAK,EAAC,KADR;AAEE,sBAAA,MAAM,EAAC,KAFT;AAGE,sBAAA,GAAG,EAAEA,SAHP;AAIE,sBAAA,GAAG,EAAC;AAJN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BATJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAzEF,eAsGE,QAAC,GAAD;AAAA,uCACE,QAAC,GAAD;AAAA,yCACE,QAAC,aAAD;AACE,oBAAA,IAAI,EAAC,aADP;AAEE,oBAAA,KAAK,EAAC,aAFR;AAGE,oBAAA,IAAI,EAAE;AAHR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAtGF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAiHE,QAAC,IAAD,CAAM,MAAN;AAAa,cAAA,SAAS,EAAC,aAAvB;AAAA,qCACE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAjHF;AAAA;AAXJ;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,qBADF;AA6ID;;AAtP8B;;AAuSjC,eAAerD,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport { Card, Row, Col } from \"react-bootstrap\";\nimport {\n  SelectField,\n  SubmitBtn,\n  TextField,\n  UploadFileField,\n  TextAreaField,\n} from \"../../components/Form\";\nimport Config from \"../../config/config.json\";\nimport Services from \"../../services/HttpServices\";\nimport { toast } from \"react-toastify\";\n\nclass Snapshot extends Component {\n  state = {\n    snapshot: {\n      id: 0,\n      customerId: \"\",\n      roomId: \"\",\n      amount: \"\",\n      startDate: \"\",\n    },\n    file: \"\",\n    shifts: [\n      { value: \"7:00 - 11:00 am\", label: \"7:00 - 11:00 am\" },\n      { value: \"12:00 - 4:00 pm\", label: \"12:00 - 4:00 pm\" },\n      { value: \"5:00 - 7:00 pm\", label: \"5:00 - 7:00 pm\" },\n      { value: \"7:00 - 11:00 pm\", label: \"7:00 - 11:00 pm\" },\n      { value: \"12:00 - 4:00 am\", label: \"12:00 - 4:00 am\" },\n      { value: \"5:00 - 7:00 am\", label: \"5:00 - 7:00 am\" },\n    ],\n    categories: [\n      { label: \"Safety\", value: \"safety\" },\n      { label: \"Environment\", value: \"environment\" },\n      { label: \"Security\", value: \"security\" },\n    ],\n    incidentTypes: [\n      { label: \"Not wearing ppe\", value: \"not wearing ppe\" },\n      { label: \"Driving high speed\", value: \"driving high speed\" },\n      {\n        label: \"Working/Standing under suspension\",\n        value: \"working/Standing under suspension\",\n      },\n    ],\n    locations: [\n      { label: \"Main Yard\", value: \"main yard\" },\n      { label: \"Queyside\", value: \"queyside\" },\n      { label: \"Gate1\", value: \"gate1\" },\n      { label: \"Gate2\", value: \"gate2\" },\n      { label: \"Gate3\", value: \"gate3\" },\n      { label: \"Gate4\", value: \"gate4\" },\n      { label: \"Gate-pregate\", value: \"gate-pregate\" },\n      { label: \"Gate-In\", value: \"gate-in\" },\n      { label: \"Gate-Out\", value: \"gate-out\" },\n    ],\n    peoples: [\n      { label: \"Third part labor\", value: \"third part labor\" },\n      { label: \"Employee\", value: \"employee\" },\n      {\n        label: \"Employee with third part labor\",\n        value: \"employee with third part labor\",\n      },\n    ],\n    equibmenties: [\n      { label: \"Personal car\", value: \"personal car\" },\n      { label: \"Terminal pick up\", value: \"terminal pick up\" },\n      { label: \"MHC\", value: \"mhc\" },\n      { label: \"QC\", value: \"qc\" },\n      { label: \"RS\", value: \"rs\" },\n      { label: \"RTG\", value: \"rtg\" },\n      { label: \"ITV\", value: \"itv\" },\n      { label: \"ECH\", value: \"ech\" },\n      { label: \"MC\", value: \"mc\" },\n      { label: \"ML\", value: \"ml\" },\n      { label: \"FL\", value: \"fl\" },\n    ],\n    responsiblies: [\n      { label: \"Operarion\", value: \"operations\" },\n      { label: \"Technical\", value: \"technical\" },\n      { label: \"Safety\", value: \"safety\" },\n      { label: \"IT\", value: \"it\" },\n      { label: \"Finance\", value: \"finance\" },\n      { label: \"HR\", value: \"hr\" },\n      { label: \"Security\", value: \"security\" },\n      { label: \"Clinical\", value: \"clinical\" },\n      { label: \"Others\", value: \"others\" },\n    ],\n    status: [\n      { label: \"Open\", value: \"open\" },\n      { label: \"Close\", value: \"close\" },\n    ],\n  };\n\n  schema = Yup.object({\n    id: Yup.number().label(\"Id\"),\n    customerId: Yup.number().required().label(\"Customer\"),\n    roomId: Yup.number().required().label(\"Room\"),\n    amount: Yup.number().required().min(0).max(10000).label(\"Amount\"),\n    startDate: Yup.date().required().label(\"Start Date\"),\n  });\n\n  render() {\n    const {\n      snapshot,\n      file,\n      shifts,\n      categories,\n      incidentTypes,\n      locations,\n      peoples,\n      equibmenties,\n      responsiblies,\n      status,\n    } = this.state;\n    const fileImage = URL.createObjectURL(\n      new Blob([this.handleStringToArray(file)], { type: \"image/png\" })\n    );\n\n    return (\n      <>\n        <Card>\n          <Card.Header>\n            <Card.Title>\n              {snapshot.id === 0 ? \"New Snapshot\" : \"Update Snapshot\"}\n            </Card.Title>\n          </Card.Header>\n          <Formik\n            initialValues={snapshot}\n            enableReinitialize={true}\n            validationSchema={this.schema}\n            onSubmit={(snapshot, { resetForm }) => {\n              resetForm();\n              this.setState({ snapshot });\n              this.handleSubmit(snapshot);\n            }}\n          >\n            {() => (\n              <>\n                <Card.Body>\n                  <Row>\n                    <Col>\n                      <SelectField\n                        name=\"category\"\n                        label=\"Category\"\n                        options={categories}\n                        required\n                      />\n                    </Col>\n                    <Col>\n                      <SelectField\n                        name=\"incidentTyp\"\n                        label=\"Incident Type\"\n                        options={incidentTypes}\n                        required\n                      />\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col>\n                      <SelectField\n                        name=\"location\"\n                        label=\"Location\"\n                        options={locations}\n                        required\n                      />\n                    </Col>\n                    <Col>\n                      <SelectField\n                        name=\"shift\"\n                        label=\"shift\"\n                        options={shifts}\n                        required\n                      />\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col>\n                      <SelectField\n                        name=\"peopleInvoved\"\n                        label=\"People Involved\"\n                        options={peoples}\n                        required\n                      />\n                    </Col>\n                    <Col>\n                      <SelectField\n                        name=\"equibment\"\n                        label=\"Equibment\"\n                        options={equibmenties}\n                        required\n                      />\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col>\n                      <SelectField\n                        name=\"responsible\"\n                        label=\"Responsible\"\n                        options={responsiblies}\n                        required\n                      />\n                    </Col>\n                    <Col>\n                      <SelectField\n                        name=\"status\"\n                        label=\"Status\"\n                        options={status}\n                        required\n                      />\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col>\n                      <TextField\n                        name=\"action\"\n                        label=\"Action on site\"\n                        required\n                        type=\"number\"\n                      />\n                    </Col>\n                    <Col>\n                      <UploadFileField\n                        name=\"image\"\n                        file=\"file\"\n                        label=\"Document\"\n                        type=\"file\"\n                        setFile={this.handleFile}\n                      />\n                      {file && (\n                        <a href={fileImage} download>\n                          <img\n                            width=\"400\"\n                            height=\"400\"\n                            src={fileImage}\n                            alt=\"\"\n                          />\n                        </a>\n                      )}\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col>\n                      <TextAreaField\n                        name=\"description\"\n                        label=\"Description\"\n                        rows={5}\n                      />\n                    </Col>\n                  </Row>\n                </Card.Body>\n                <Card.Footer className=\"text-center\">\n                  <SubmitBtn />\n                </Card.Footer>\n              </>\n            )}\n          </Formik>\n        </Card>\n      </>\n    );\n  }\n\n  handleFile = (file) => {\n    this.setState({ file });\n  };\n  handleStringToArray = (str = \"\") => {\n    const array = str.split(\",\");\n    const buffer = [];\n\n    for (let index = 0; index < array.length; index++) {\n      buffer[index] = array[index];\n    }\n\n    const data = new Uint8Array(buffer);\n\n    return data;\n  };\n  handleSubmit = () => {\n    const { snapshot, file } = this.state;\n    const auth = { Authorization: `bearer ${localStorage[\"token\"]}` };\n    const data = { ...snapshot, document: file };\n\n    this.setState({\n      snapshot: {\n        id: 0,\n        customerId: \"\",\n        roomId: \"\",\n        amount: \"\",\n        startDate: snapshot.startDate,\n      },\n      file: \"\",\n    });\n\n    Services.post(Config.apiUrl + \"/snapshots\", data, { headers: auth })\n      .then(() => {\n        toast.success(\"Successful Registred.\");\n      })\n      .catch((error) => {\n        console.log(error);\n\n        if (error.response && error.response.data) {\n          toast.error(error.response.data);\n        } else {\n          toast.error(\"Something went wrong\");\n        }\n      });\n  };\n}\n\nexport default Snapshot;\n"]},"metadata":{},"sourceType":"module"}