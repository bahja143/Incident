{"ast":null,"code":"var _jsxFileName = \"/home/abdisalam/Downloads/BMSytem/ClientApp/src/views/Rental/Rentals.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { NavLink } from \"react-router-dom\";\nimport Config from \"../../config/config.json\";\nimport Services from \"../../services/HttpServices\";\nimport { toast } from \"react-toastify\";\nimport { MDBDataTableV5 } from \"mdbreact\";\nimport Fontawesome from \"react-fontawesome\";\nimport SweatAlert from \"react-bootstrap-sweetalert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Rentals = () => {\n  _s();\n\n  const [rentals, setRentals] = useState([]);\n  const [rent, setRental] = useState({\n    customer: {}\n  });\n  const [show, setShow] = useState(false);\n  const [tableHeaders] = useState([{\n    label: \"Customer\",\n    field: \"name\"\n  }, {\n    label: \"Tellphone\",\n    field: \"tellphone\"\n  }, {\n    label: \"Room No\",\n    field: \"roomNumber\"\n  }, {\n    label: \"Amount\",\n    field: \"amount\"\n  }, {\n    label: \"Date\",\n    field: \"startDate\"\n  }, {\n    label: \"\",\n    field: \"edit\"\n  }]);\n\n  const handleOut = obj => {\n    setRental(obj);\n    setShow(true);\n  };\n\n  const handleApprove = () => {\n    const auth = {\n      Authorization: `bearer ${localStorage[\"token\"]}`\n    };\n    setShow(false);\n    Services.get(Config.apiUrl + \"/rental/out/\" + rent.id, {\n      headers: auth\n    }).then(() => {\n      toast.warning(\"Outed\");\n    }).catch(error => {\n      console.log(error);\n      toast.error(\"Something went wrong\");\n    });\n  };\n\n  useEffect(() => {\n    const auth = {\n      Authorization: `bearer ${localStorage[\"token\"]}`\n    };\n    Services.get(Config.apiUrl + \"/rentals\", {\n      headers: auth\n    }).then(({\n      data\n    }) => {\n      setRentals(data.filter(r => r.isCurrent));\n    }).catch(error => {\n      console.log(error);\n      toast.error(\"Something went wrong\");\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SweatAlert, {\n      title: \"Are you sure to out(\" + rent.customer.name + \")\",\n      show: show,\n      onCancel: () => setShow(false),\n      closeOnClickOutside: true,\n      confirmButtonColor: \"green\",\n      onConfirm: () => handleApprove(),\n      showCloseButton: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        children: /*#__PURE__*/_jsxDEV(Card.Title, {\n          children: \"Rentals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(MDBDataTableV5, {\n          hover: true,\n          entriesOptions: [10, 25, 50, 100, 250, 500, 1000],\n          entries: 10,\n          pagesAmount: 10,\n          data: {\n            columns: tableHeaders,\n            rows: rentals.map(ren => {\n              ren.edit = /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(NavLink, {\n                  to: \"/rentals/rentalForm/edit/\" + ren.id,\n                  children: /*#__PURE__*/_jsxDEV(Fontawesome, {\n                    className: \"fas fa-edit text-primary\",\n                    style: {\n                      fontSize: 17\n                    },\n                    name: \"edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 87,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"ml-4\",\n                  onClick: () => handleOut(ren),\n                  children: /*#__PURE__*/_jsxDEV(Fontawesome, {\n                    className: \"fas fa-sign-out-alt text-danger\",\n                    style: {\n                      fontSize: 17\n                    },\n                    name: \"edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true);\n              ren.name = ren.customer.name;\n              ren.tellphone = ren.customer.tellphone;\n              ren.roomNumber = ren.room.roomNumber;\n              ren.amount = \"$\" + ren.amount;\n              ren.startDate = new Date(ren.startDate).toDateString();\n              return ren;\n            })\n          },\n          pagingTop: true,\n          searchTop: true,\n          searchBottom: false,\n          fullPagination: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Rentals, \"tWJFHq8cV9AvfbhiuAVITHN2rM4=\");\n\n_c = Rentals;\nexport default Rentals;\n\nvar _c;\n\n$RefreshReg$(_c, \"Rentals\");","map":{"version":3,"sources":["/home/abdisalam/Downloads/BMSytem/ClientApp/src/views/Rental/Rentals.jsx"],"names":["React","useState","useEffect","Card","NavLink","Config","Services","toast","MDBDataTableV5","Fontawesome","SweatAlert","Rentals","rentals","setRentals","rent","setRental","customer","show","setShow","tableHeaders","label","field","handleOut","obj","handleApprove","auth","Authorization","localStorage","get","apiUrl","id","headers","then","warning","catch","error","console","log","data","filter","r","isCurrent","name","columns","rows","map","ren","edit","fontSize","tellphone","roomNumber","room","amount","startDate","Date","toDateString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { NavLink } from \"react-router-dom\";\n\nimport Config from \"../../config/config.json\";\nimport Services from \"../../services/HttpServices\";\nimport { toast } from \"react-toastify\";\nimport { MDBDataTableV5 } from \"mdbreact\";\nimport Fontawesome from \"react-fontawesome\";\nimport SweatAlert from \"react-bootstrap-sweetalert\";\n\nconst Rentals = () => {\n  const [rentals, setRentals] = useState([]);\n  const [rent, setRental] = useState({ customer: {} });\n  const [show, setShow] = useState(false);\n  const [tableHeaders] = useState([\n    { label: \"Customer\", field: \"name\" },\n    { label: \"Tellphone\", field: \"tellphone\" },\n    { label: \"Room No\", field: \"roomNumber\" },\n    { label: \"Amount\", field: \"amount\" },\n    { label: \"Date\", field: \"startDate\" },\n    { label: \"\", field: \"edit\" },\n  ]);\n  const handleOut = (obj) => {\n    setRental(obj);\n    setShow(true);\n  };\n\n  const handleApprove = () => {\n    const auth = { Authorization: `bearer ${localStorage[\"token\"]}` };\n    setShow(false);\n\n    Services.get(Config.apiUrl + \"/rental/out/\" + rent.id, {\n      headers: auth,\n    })\n      .then(() => {\n        toast.warning(\"Outed\");\n      })\n      .catch((error) => {\n        console.log(error);\n\n        toast.error(\"Something went wrong\");\n      });\n  };\n\n  useEffect(() => {\n    const auth = { Authorization: `bearer ${localStorage[\"token\"]}` };\n\n    Services.get(Config.apiUrl + \"/rentals\", { headers: auth })\n      .then(({ data }) => {\n        setRentals(data.filter((r) => r.isCurrent));\n      })\n      .catch((error) => {\n        console.log(error);\n\n        toast.error(\"Something went wrong\");\n      });\n  }, []);\n\n  return (\n    <>\n      <SweatAlert\n        title={\"Are you sure to out(\" + rent.customer.name + \")\"}\n        show={show}\n        onCancel={() => setShow(false)}\n        closeOnClickOutside\n        confirmButtonColor=\"green\"\n        onConfirm={() => handleApprove()}\n        showCloseButton\n      />\n      <Card>\n        <Card.Header>\n          <Card.Title>Rentals</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <MDBDataTableV5\n            hover\n            entriesOptions={[10, 25, 50, 100, 250, 500, 1000]}\n            entries={10}\n            pagesAmount={10}\n            data={{\n              columns: tableHeaders,\n              rows: rentals.map((ren) => {\n                ren.edit = (\n                  <>\n                    <NavLink to={\"/rentals/rentalForm/edit/\" + ren.id}>\n                      <Fontawesome\n                        className=\"fas fa-edit text-primary\"\n                        style={{ fontSize: 17 }}\n                        name=\"edit\"\n                      />\n                    </NavLink>\n                    <a className=\"ml-4\" onClick={() => handleOut(ren)}>\n                      <Fontawesome\n                        className=\"fas fa-sign-out-alt text-danger\"\n                        style={{ fontSize: 17 }}\n                        name=\"edit\"\n                      />\n                    </a>\n                  </>\n                );\n\n                ren.name = ren.customer.name;\n                ren.tellphone = ren.customer.tellphone;\n                ren.roomNumber = ren.room.roomNumber;\n                ren.amount = \"$\" + ren.amount;\n                ren.startDate = new Date(ren.startDate).toDateString();\n                return ren;\n              }),\n            }}\n            pagingTop\n            searchTop\n            searchBottom={false}\n            fullPagination\n          />\n        </Card.Body>\n      </Card>\n    </>\n  );\n};\n\nexport default Rentals;\n"]},"metadata":{},"sourceType":"module"}