{"ast":null,"code":"var _jsxFileName = \"/home/abdisalam/Documents/Incident/ClientApp/src/views/Checklist/ChecklistForm.jsx\";\nimport React, { Component } from \"react\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Card, Row, Col } from \"react-bootstrap\";\nimport { SelectField, SubmitBtn, TextField, DateField } from \"../../components/Form\";\nimport Config from \"../../config/config.json\";\nimport Services from \"../../services/HttpServices\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ChecklistForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      chechlist: {\n        id: 0,\n        customerId: \"\",\n        roomId: \"\",\n        amount: \"\",\n        startDate: \"\"\n      },\n      customers: [],\n      rooms: [],\n      equibments: [{\n        value: 1,\n        label: \"FORKLIFT\"\n      }, {\n        value: 2,\n        label: \"ITV\"\n      }, {\n        value: 3,\n        label: \"MHC\"\n      }, {\n        value: 4,\n        label: \"MC\"\n      }, {\n        value: 5,\n        label: \"RTG\"\n      }, {\n        value: 6,\n        label: \"ECH\"\n      }, {\n        value: 7,\n        label: \"RS\"\n      }],\n      shifts: [{\n        value: 1,\n        label: \"7:00 - 11:00 am\"\n      }, {\n        value: 2,\n        label: \"12:00 - 4:00 pm\"\n      }, {\n        value: 3,\n        label: \"5:00 - 7:00 pm\"\n      }, {\n        value: 4,\n        label: \"7:00 - 11:00 pm\"\n      }, {\n        value: 5,\n        label: \"12:00 - 4:00 am\"\n      }, {\n        value: 6,\n        label: \"5:00 - 7:00 am\"\n      }]\n    };\n    this.schema = Yup.object({\n      id: Yup.number().label(\"Id\"),\n      customerId: Yup.number().required().label(\"Customer\"),\n      roomId: Yup.number().required().label(\"Room\"),\n      amount: Yup.number().required().min(0).max(10000).label(\"Amount\"),\n      startDate: Yup.date().required().label(\"Start Date\")\n    });\n\n    this.handleSubmit = () => {\n      const {\n        chechlist,\n        file\n      } = this.state;\n      const auth = {\n        Authorization: `bearer ${localStorage[\"token\"]}`\n      };\n      const data = { ...chechlist,\n        document: file\n      };\n      this.setState({\n        chechlist: {\n          id: 0,\n          customerId: \"\",\n          roomId: \"\",\n          amount: \"\",\n          startDate: chechlist.startDate\n        },\n        file: \"\"\n      });\n\n      if (chechlist.id === 0) {\n        Services.post(Config.apiUrl + \"/rentals\", data, {\n          headers: auth\n        }).then(() => {\n          toast.success(\"Successful Registred.\");\n        }).catch(error => {\n          console.log(error);\n\n          if (error.response && error.response.data) {\n            toast.error(error.response.data);\n          } else {\n            toast.error(\"Something went wrong\");\n          }\n        });\n      } else {\n        Services.put(Config.apiUrl + \"/rentals/\" + data.id, data, {\n          headers: auth\n        }).then(() => {\n          toast.info(\"Successful Updates.\");\n        }).catch(error => {\n          console.log(error);\n\n          if (error.response && error.response.data) {\n            toast.error(error.response.data);\n          } else {\n            toast.error(\"Something went wrong\");\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      chechlist,\n      rooms,\n      equibments\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          children: /*#__PURE__*/_jsxDEV(Card.Title, {\n            children: chechlist.id === 0 ? \"New checklist\" : \"Update checklist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: chechlist,\n          enableReinitialize: true,\n          validationSchema: this.schema,\n          onSubmit: (chechlist, {\n            resetForm\n          }) => {\n            resetForm();\n            this.setState({\n              chechlist\n            });\n            this.handleSubmit(chechlist);\n          },\n          children: () => /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"customerId\",\n                    label: \"Equibment\",\n                    options: equibments,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(SelectField, {\n                    name: \"roomId\",\n                    label: \"Room\",\n                    options: rooms.map(c => ({\n                      label: c.roomNumber,\n                      value: c.id\n                    })),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 89,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    name: \"amount\",\n                    label: \"Amount\",\n                    required: true,\n                    type: \"number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(DateField, {\n                    name: \"startDate\",\n                    label: \"start Date\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsxDEV(SubmitBtn, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n  componentDidMount() {\n    const auth = {\n      Authorization: `bearer ${localStorage[\"token\"]}`\n    };\n    const {\n      id\n    } = this.props.match.params;\n\n    if (id) {\n      Services.get(Config.apiUrl + \"/rentals/\" + id, {\n        headers: auth\n      }).then(({\n        data\n      }) => {\n        delete data.endDate;\n        delete data.isCurrent;\n        delete data.customer;\n        delete data.room;\n        this.setState({\n          file: data.document\n        });\n        delete data.document;\n        this.setState({\n          chechlist: data\n        });\n      }).catch(error => {\n        console.log(error);\n        toast.error(\"Something went wrong\");\n      });\n    }\n\n    Services.get(Config.apiUrl + \"/customers\", {\n      headers: auth\n    }).then(({\n      data\n    }) => {\n      this.setState({\n        customers: data\n      });\n    }).catch(error => {\n      console.log(error);\n      toast.error(\"Something went wrong\");\n    });\n    Services.get(Config.apiUrl + \"/rooms\", {\n      headers: auth\n    }).then(({\n      data\n    }) => {\n      this.setState({\n        rooms: data\n      });\n    }).catch(error => {\n      console.log(error);\n      toast.error(\"Something went wrong\");\n    });\n  }\n\n}\n\nexport default ChecklistForm;","map":{"version":3,"sources":["/home/abdisalam/Documents/Incident/ClientApp/src/views/Checklist/ChecklistForm.jsx"],"names":["React","Component","Formik","Yup","Card","Row","Col","SelectField","SubmitBtn","TextField","DateField","Config","Services","toast","ChecklistForm","state","chechlist","id","customerId","roomId","amount","startDate","customers","rooms","equibments","value","label","shifts","schema","object","number","required","min","max","date","handleSubmit","file","auth","Authorization","localStorage","data","document","setState","post","apiUrl","headers","then","success","catch","error","console","log","response","put","info","render","resetForm","map","c","roomNumber","componentDidMount","props","match","params","get","endDate","isCurrent","customer","room"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport { Card, Row, Col } from \"react-bootstrap\";\nimport {\n    SelectField,\n    SubmitBtn,\n    TextField,\n    DateField,\n} from \"../../components/Form\";\nimport Config from \"../../config/config.json\";\nimport Services from \"../../services/HttpServices\";\nimport { toast } from \"react-toastify\";\n\nclass ChecklistForm extends Component {\n    state = {\n        chechlist: {\n            id: 0,\n            customerId: \"\",\n            roomId: \"\",\n            amount: \"\",\n            startDate: \"\",\n        },\n        customers: [],\n        rooms: [],\n        equibments: [\n            { value: 1, label: \"FORKLIFT\" }, \n            { value: 2, label: \"ITV\" }, \n            { value: 3, label: \"MHC\" }, \n            { value: 4, label: \"MC\" }, \n            { value: 5, label: \"RTG\" }, \n            { value: 6, label:\"ECH\" }, \n            {value:7, label:\"RS\"}\n        ],\n        shifts: [\n            {value: 1, label: \"7:00 - 11:00 am\"},\n            {value: 2, label: \"12:00 - 4:00 pm\"},\n            {value: 3, label: \"5:00 - 7:00 pm\"},\n            {value: 4, label: \"7:00 - 11:00 pm\"}, \n            {value: 5, label: \"12:00 - 4:00 am\"}, \n            {value: 6, label: \"5:00 - 7:00 am\"}\n        ]\n    };\n\n    schema = Yup.object({\n        id: Yup.number().label(\"Id\"),\n        customerId: Yup.number().required().label(\"Customer\"),\n        roomId: Yup.number().required().label(\"Room\"),\n        amount: Yup.number().required().min(0).max(10000).label(\"Amount\"),\n        startDate: Yup.date().required().label(\"Start Date\"),\n    });\n\n    render() {\n        const { chechlist, rooms, equibments } = this.state;\n\n\n        return (\n            <>\n                <Card>\n                    <Card.Header>\n                        <Card.Title>\n                            {chechlist.id === 0 ? \"New checklist\" : \"Update checklist\"}\n                        </Card.Title>\n                    </Card.Header>\n                    <Formik\n                        initialValues={chechlist}\n                        enableReinitialize={true}\n                        validationSchema={this.schema}\n                        onSubmit={(chechlist, { resetForm }) => {\n                            resetForm();\n                            this.setState({ chechlist });\n                            this.handleSubmit(chechlist);\n                        }}\n                    >\n                        {() => (\n                            <>\n                                <Card.Body>\n                                    <Row>\n                                        <Col>\n                                            <SelectField\n                                                name=\"customerId\"\n                                                label=\"Equibment\"\n                                                options={equibments}\n                                                required\n                                            />\n                                        </Col>\n                                        <Col>\n                                            <SelectField\n                                                name=\"roomId\"\n                                                label=\"Room\"\n                                                options={rooms.map((c) => ({\n                                                    label: c.roomNumber,\n                                                    value: c.id,\n                                                }))}\n                                                required\n                                            />\n                                        </Col>\n                                    </Row>\n                                    <Row>\n                                        <Col>\n                                            <TextField\n                                                name=\"amount\"\n                                                label=\"Amount\"\n                                                required\n                                                type=\"number\"\n                                            />\n                                        </Col>\n                                        <Col>\n                                            <DateField name=\"startDate\" label=\"start Date\" required />\n                                        </Col>\n                                    </Row>\n                                </Card.Body>\n                                <Card.Footer className=\"text-center\">\n                                    <SubmitBtn />\n                                </Card.Footer>\n                            </>\n                        )}\n                    </Formik>\n                </Card>\n            </>\n        );\n    }\n\n    componentDidMount() {\n        const auth = { Authorization: `bearer ${localStorage[\"token\"]}` };\n        const { id } = this.props.match.params;\n\n        if (id) {\n            Services.get(Config.apiUrl + \"/rentals/\" + id, { headers: auth })\n                .then(({ data }) => {\n                    delete data.endDate;\n                    delete data.isCurrent;\n                    delete data.customer;\n                    delete data.room;\n\n                    this.setState({ file: data.document });\n                    delete data.document;\n                    this.setState({ chechlist: data });\n                })\n                .catch((error) => {\n                    console.log(error);\n\n                    toast.error(\"Something went wrong\");\n                });\n        }\n\n        Services.get(Config.apiUrl + \"/customers\", { headers: auth })\n            .then(({ data }) => {\n                this.setState({ customers: data });\n            })\n            .catch((error) => {\n                console.log(error);\n\n                toast.error(\"Something went wrong\");\n            });\n\n        Services.get(Config.apiUrl + \"/rooms\", { headers: auth })\n            .then(({ data }) => {\n                this.setState({ rooms: data });\n            })\n            .catch((error) => {\n                console.log(error);\n\n                toast.error(\"Something went wrong\");\n            });\n    }\n    handleSubmit = () => {\n        const { chechlist, file } = this.state;\n        const auth = { Authorization: `bearer ${localStorage[\"token\"]}` };\n        const data = { ...chechlist, document: file };\n\n        this.setState({\n            chechlist: {\n                id: 0,\n                customerId: \"\",\n                roomId: \"\",\n                amount: \"\",\n                startDate: chechlist.startDate,\n            },\n            file: \"\",\n        });\n\n        if (chechlist.id === 0) {\n            Services.post(Config.apiUrl + \"/rentals\", data, { headers: auth })\n                .then(() => {\n                    toast.success(\"Successful Registred.\");\n                })\n                .catch((error) => {\n                    console.log(error);\n\n                    if (error.response && error.response.data) {\n                        toast.error(error.response.data);\n                    } else {\n                        toast.error(\"Something went wrong\");\n                    }\n                });\n        } else {\n            Services.put(Config.apiUrl + \"/rentals/\" + data.id, data, {\n                headers: auth,\n            })\n                .then(() => {\n                    toast.info(\"Successful Updates.\");\n                })\n                .catch((error) => {\n                    console.log(error);\n\n                    if (error.response && error.response.data) {\n                        toast.error(error.response.data);\n                    } else {\n                        toast.error(\"Something went wrong\");\n                    }\n                });\n        }\n    };\n}\n\nexport default ChecklistForm;\n"]},"metadata":{},"sourceType":"module"}